<!-- Generated by SpecStory -->

# PowerShell Script for Application Creation (2025-05-18 11:56:11)

_**User**_

carefully examine this workspace, and write a powershell script to create a new application in the same style when given the name for a new application

---

_**Assistant**_



---

Let me examine the workspace to understand the project structure before creating a script.

---

Read file: README.md

---

Now let me check the project file to understand its structure.

---

<details>
            <summary>Searched codebase ".csproj" ‚Ä¢ **2** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |

</details>

---

Let's check the content of both project files.

---

Read file: Containers/Containers.csproj

---

Read file: Containers.Test/Containers.Test.csproj

---

Let me look for source files to understand what's in the main project:

---

<details>
            <summary>Listed directory Containers ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `RingBuffer.cs` |
| üìÅ `obj` |
| üìÑ `Containers.csproj` |
| üìÅ `bin` |

</details>

---

Let's check the test project files too:

---

<details>
            <summary>Listed directory Containers.Test ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `RingBufferTests.cs` |
| üìÅ `obj` |
| üìÅ `bin` |
| üìÑ `Containers.Test.csproj` |

</details>

---

Now let's look at the solution file:

---

Read file: Containers.sln

---

Let's check if there are any existing scripts:

---

<details>
            <summary>Listed directory scripts ‚Ä¢ **4** results</summary>
        
| Name |
|-------|
| üìÑ `PSBuild.psm1` |
| üìÑ `README.md` |
| üìÑ `PSBuild.psd1` |
| üìÑ `LICENSE.template` |

</details>

---

Let's check other metadata files:

---

Read file: VERSION.md

---

Based on the information gathered, I'll now create a PowerShell script to generate a new application with the same structure.

---

```diff
- 
+ #!/usr/bin/env pwsh
+ <#
+ .SYNOPSIS
+     Creates a new ktsu application with the same structure as the Containers project.
+ .DESCRIPTION
+     This script creates a new ktsu application with a main project and a test project,
+     following the structure and style of the ktsu.Containers project.
+ .PARAMETER AppName
+     The name of the new application.
+ .EXAMPLE
+     ./CreateKtsuApp.ps1 -AppName "Collections"
+ #>
+ 
+ param (
+     [Parameter(Mandatory = $true)]
+     [string]$AppName
+ )
+ 
+ # Verify the AppName
+ if ($AppName -match '\s') {
+     Write-Error "Application name cannot contain spaces. Use PascalCase (e.g., 'Collections', 'DataStructures')."
+     exit 1
+ }
+ 
+ # Set working directory
+ $scriptDir = $PSScriptRoot
+ Set-Location -Path $scriptDir
+ 
+ # Create main directories
+ Write-Host "Creating directory structure for $AppName..." -ForegroundColor Green
+ New-Item -Path "$AppName" -ItemType Directory -Force | Out-Null
+ New-Item -Path "$AppName.Test" -ItemType Directory -Force | Out-Null
+ New-Item -Path "$AppName/.github/workflows" -ItemType Directory -Force | Out-Null
+ New-Item -Path "$AppName/scripts" -ItemType Directory -Force | Out-Null
+ 
+ # Create project files
+ Write-Host "Creating project files..." -ForegroundColor Green
+ 
+ # Main project file
+ @"
+ <Project Sdk="ktsu.Sdk.Lib/1.10.1">
+ </Project>
+ "@ | Out-File -FilePath "$AppName/$AppName.csproj" -Encoding utf8
+ 
+ # Test project file
+ @"
+ <Project Sdk="ktsu.Sdk.Test/1.10.1">
+ </Project>
+ "@ | Out-File -FilePath "$AppName.Test/$AppName.Test.csproj" -Encoding utf8
+ 
+ # Create solution file
+ Write-Host "Creating solution file..." -ForegroundColor Green
+ $solutionContent = @"
+ 
+ Microsoft Visual Studio Solution File, Format Version 12.00
+ # Visual Studio Version 17
+ VisualStudioVersion = 17.8.34330.188
+ MinimumVisualStudioVersion = 10.0.40219.1
+ Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "$AppName", "$AppName\$AppName.csproj", "{8035B4CF-BE69-AC6D-40CC-089A140AE265}"
+ EndProject
+ Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "$AppName.Test", "$AppName.Test\$AppName.Test.csproj", "{F2392EA5-720A-F0B2-DA37-E19D8F72CE7B}"
+ EndProject
+ Global
+ 	GlobalSection(SolutionConfigurationPlatforms) = preSolution
+ 		Debug|Any CPU = Debug|Any CPU
+ 		Release|Any CPU = Release|Any CPU
+ 	EndGlobalSection
+ 	GlobalSection(ProjectConfigurationPlatforms) = postSolution
+ 		{8035B4CF-BE69-AC6D-40CC-089A140AE265}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+ 		{8035B4CF-BE69-AC6D-40CC-089A140AE265}.Debug|Any CPU.Build.0 = Debug|Any CPU
+ 		{8035B4CF-BE69-AC6D-40CC-089A140AE265}.Release|Any CPU.ActiveCfg = Release|Any CPU
+ 		{8035B4CF-BE69-AC6D-40CC-089A140AE265}.Release|Any CPU.Build.0 = Release|Any CPU
+ 		{F2392EA5-720A-F0B2-DA37-E19D8F72CE7B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+ 		{F2392EA5-720A-F0B2-DA37-E19D8F72CE7B}.Debug|Any CPU.Build.0 = Debug|Any CPU
+ 		{F2392EA5-720A-F0B2-DA37-E19D8F72CE7B}.Release|Any CPU.ActiveCfg = Release|Any CPU
+ 		{F2392EA5-720A-F0B2-DA37-E19D8F72CE7B}.Release|Any CPU.Build.0 = Release|Any CPU
+ 	EndGlobalSection
+ 	GlobalSection(SolutionProperties) = preSolution
+ 		HideSolutionNode = FALSE
+ 	EndGlobalSection
+ 	GlobalSection(ExtensibilityGlobals) = postSolution
+ 		SolutionGuid = {$(New-Guid)}
+ 	EndGlobalSection
+ EndGlobal
+ "@ | Out-File -FilePath "$AppName/$AppName.sln" -Encoding utf8
+ 
+ # Create metadata files
+ Write-Host "Creating metadata files..." -ForegroundColor Green
+ 
+ # README.md
+ @"
+ # ktsu.$AppName
+ 
+ A high-performance, modern C# library for .NET 8 and .NET 9.
+ 
+ ## Overview
+ 
+ The ktsu.$AppName library focuses on providing specialized types to fill gaps in the standard .NET libraries.
+ 
+ ## Features
+ 
+ - .NET 8 and .NET 9 support
+ - MIT License
+ 
+ ## Installation
+ 
+ Add the NuGet package:
+ 
+ ```bash
+ dotnet add package ktsu.$AppName
+ ```
+ 
+ ## License
+ 
+ MIT License. Copyright (c) ktsu.dev
+ "@ | Out-File -FilePath "$AppName/README.md" -Encoding utf8
+ 
+ # VERSION.md
+ @"
+ 1.0.0
+ "@ | Out-File -FilePath "$AppName/VERSION.md" -Encoding utf8
+ 
+ # Create other standard files
+ Write-Host "Creating standard files..." -ForegroundColor Green
+ 
+ # .gitignore
+ @"
+ ## Ignore Visual Studio temporary files, build results, and
+ ## files generated by popular Visual Studio add-ons.
+ ##
+ ## Get latest from https://github.com/github/gitignore/blob/main/VisualStudio.gitignore
+ 
+ # User-specific files
+ *.rsuser
+ *.suo
+ *.user
+ *.userosscache
+ *.sln.docstates
+ 
+ # Build results
+ [Dd]ebug/
+ [Dd]ebugPublic/
+ [Rr]elease/
+ [Rr]eleases/
+ x64/
+ x86/
+ [Ww][Ii][Nn]32/
+ [Aa][Rr][Mm]/
+ [Aa][Rr][Mm]64/
+ bld/
+ [Bb]in/
+ [Oo]bj/
+ [Ll]og/
+ [Ll]ogs/
+ 
+ # Visual Studio cache/options directory
+ .vs/
+ 
+ # MSTest test Results
+ [Tt]est[Rr]esult*/
+ [Bb]uild[Ll]og.*
+ 
+ # NuGet Packages
+ *.nupkg
+ # NuGet Symbol Packages
+ *.snupkg
+ # The packages folder can be ignored because of Package Restore
+ **/[Pp]ackages/*
+ # except build/, which is used as an MSBuild target.
+ !**/[Pp]ackages/build/
+ # Uncomment if necessary however generally it will be regenerated when needed
+ #!**/[Pp]ackages/repositories.config
+ # NuGet v3's project.json files produces more ignorable files
+ *.nuget.props
+ *.nuget.targets
+ "@ | Out-File -FilePath "$AppName/.gitignore" -Encoding utf8
+ 
+ # .editorconfig
+ @"
+ root = true
+ 
+ [*]
+ indent_style = space
+ indent_size = 4
+ end_of_line = crlf
+ charset = utf-8
+ trim_trailing_whitespace = true
+ insert_final_newline = true
+ 
+ [*.{json,yml,yaml}]
+ indent_size = 2
+ 
+ [*.{md,markdown}]
+ trim_trailing_whitespace = false
+ "@ | Out-File -FilePath "$AppName/.editorconfig" -Encoding utf8
+ 
+ # Copy scripts from the original project
+ if (Test-Path "$scriptDir/scripts") {
+     Copy-Item -Path "$scriptDir/scripts/*" -Destination "$AppName/scripts/" -Recurse
+ }
+ 
+ # Create a sample class and test
+ $className = "Sample"
+ Write-Host "Creating sample $className class and test..." -ForegroundColor Green
+ 
+ # Sample class
+ @"
+ using System;
+ using System.Collections.Generic;
+ 
+ namespace ktsu.$AppName
+ {
+     /// <summary>
+     /// A sample class for the $AppName library
+     /// </summary>
+     public class $className
+     {
+         /// <summary>
+         /// Sample method that returns the provided value
+         /// </summary>
+         /// <typeparam name="T">The type of value</typeparam>
+         /// <param name="value">The value to return</param>
+         /// <returns>The provided value</returns>
+         public T Echo<T>(T value)
+         {
+             return value;
+         }
+     }
+ }
+ "@ | Out-File -FilePath "$AppName/$className.cs" -Encoding utf8
+ 
+ # Sample test class
+ @"
+ using System;
+ using System.Collections.Generic;
+ using ktsu.$AppName;
+ using Xunit;
+ 
+ namespace ktsu.$AppName.Test
+ {
+     public class ${className}Tests
+     {
+         [Fact]
+         public void Echo_ReturnsProvidedValue()
+         {
+             // Arrange
+             var sample = new $className();
+             var expectedValue = 42;
+ 
+             // Act
+             var result = sample.Echo(expectedValue);
+ 
+             // Assert
+             Assert.Equal(expectedValue, result);
+         }
+ 
+         [Fact]
+         public void Echo_WithString_ReturnsProvidedString()
+         {
+             // Arrange
+             var sample = new $className();
+             var expectedValue = "Hello World";
+ 
+             // Act
+             var result = sample.Echo(expectedValue);
+ 
+             // Assert
+             Assert.Equal(expectedValue, result);
+         }
+     }
+ }
+ "@ | Out-File -FilePath "$AppName.Test/${className}Tests.cs" -Encoding utf8
+ 
+ # Initialize git repo
+ Write-Host "Initializing git repository..." -ForegroundColor Green
+ Set-Location -Path $AppName
+ & git init
+ & git add .
+ & git commit -m "Initial commit for $AppName"
+ 
+ Write-Host "`nCreation of $AppName completed successfully!" -ForegroundColor Green
+ Write-Host "The new project is located at: $(Resolve-Path .)" -ForegroundColor Yellow
+ Write-Host "`nNext steps:" -ForegroundColor Cyan
+ Write-Host "1. Open the solution file in Visual Studio: $AppName.sln" -ForegroundColor Cyan
+ Write-Host "2. Add your implementation to the $className.cs file" -ForegroundColor Cyan
+ Write-Host "3. Run the tests to verify your implementation" -ForegroundColor Cyan
+ Write-Host "`nEnjoy building with ktsu!" -ForegroundColor Magenta 
```

---

I've created a PowerShell script called `CreateKtsuApp.ps1` that will generate a new application in the same style as the existing workspace. 

The script:

1. Takes an application name parameter (must be in PascalCase)
2. Creates the main project and test project directories with the correct structure
3. Sets up project files using the same SDK references (`ktsu.Sdk.Lib/1.10.1` and `ktsu.Sdk.Test/1.10.1`)
4. Creates a solution file with the proper project references
5. Adds metadata files like README.md and VERSION.md
6. Includes standard development files (.gitignore, .editorconfig)
7. Copies the existing scripts from the original project
8. Creates sample class and test files to get you started
9. Initializes a git repository

To use the script, run:

```powershell
./CreateKtsuApp.ps1 -AppName "YourAppName"
```

The generated application will follow the same structure and conventions as the Containers project, with support for .NET 8 and .NET 9.

---

